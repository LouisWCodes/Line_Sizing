# AS 4130 HDPE Capability Matrix
# Based on AS/NZS 4130, from Vinidex
# All dimensions are in mm, wall thickness are minimum values while IDs are industry means


AS4130_HDPE ={
    # Define wall thicknesses and internal diameters for the different SDRs at DN16 
    16: {
        "SDR41": {"MinWall": 1.6, "MeanID": 13},
        "SDR33": {"MinWall": 1.6, "MeanID": 13},
        "SDR26": {"MinWall": 1.6, "MeanID": 13},
        "SDR21": {"MinWall": 1.6, "MeanID": 13},
        "SDR17": {"MinWall": 1.6, "MeanID": 13},
        "SDR13.6": {"MinWall": 1.6, "MeanID": 13},
        "SDR11": {"MinWall": 1.8, "MeanID": 12},
        "SDR9": {"MinWall": 2.2, "MeanID": 11},
    },
    # Define wall thicknesses and internal diameters for the different SDRs at DN20
     20: {
        "SDR41": {"MinWall": 1.6, "MeanID": 17},
        "SDR33": {"MinWall": 1.6, "MeanID": 17},
        "SDR26": {"MinWall": 1.6, "MeanID": 17},
        "SDR21": {"MinWall": 1.6, "MeanID": 17},
        "SDR17": {"MinWall": 1.6, "MeanID": 17},
        "SDR13.6": {"MinWall": 1.9, "MeanID": 16},
        "SDR11": {"MinWall": 2.3, "MeanID": 15},
        "SDR9": {"MinWall": 2.8, "MeanID": 14},
    },   
    # Define wall thicknesses and internal diameters for the different SDRs at DN25
         25: {
        "SDR41": {"MinWall": 1.6, "MeanID": 22},
        "SDR33": {"MinWall": 1.6, "MeanID": 22},
        "SDR26": {"MinWall": 1.6, "MeanID": 22},
        "SDR21": {"MinWall": 1.6, "MeanID": 22},
        "SDR17": {"MinWall": 1.6, "MeanID": 22},
        "SDR13.6": {"MinWall": 1.9, "MeanID": 21},
        "SDR11": {"MinWall": 2.3, "MeanID": 20},
        "SDR9": {"MinWall": 2.8, "MeanID": 19},
        "SDR7.4": {"MinWall": 3.5, "MeanID": 18},
    },   
    # Define wall thicknesses and internal diameters for the different SDRs at DN32
         32: {
        "SDR41": {"MinWall": 1.6, "MeanID": 29},
        "SDR33": {"MinWall": 1.6, "MeanID": 29},
        "SDR26": {"MinWall": 1.6, "MeanID": 29},
        "SDR21": {"MinWall": 1.6, "MeanID": 29},
        "SDR17": {"MinWall": 1.9, "MeanID": 28},
        "SDR13.6": {"MinWall": 2.4, "MeanID": 27},
        "SDR11": {"MinWall": 2.9, "MeanID": 26},
        "SDR9": {"MinWall": 3.6, "MeanID": 24},
        "SDR7.4": {"MinWall": 4.4, "MeanID": 23},
    },         
    # Define wall thicknesses and internal diameters for the different SDRs at DN50
         50: {
        "SDR41": {"MinWall": 1.6, "MeanID": 47},
        "SDR33": {"MinWall": 1.6, "MeanID": 47},
        "SDR26": {"MinWall": 2.0, "MeanID": 46},
        "SDR21": {"MinWall": 2.4, "MeanID": 45},
        "SDR17": {"MinWall": 3.0, "MeanID": 44},
        "SDR13.6": {"MinWall": 3.7, "MeanID": 42},
        "SDR11": {"MinWall": 4.6, "MeanID": 40},
        "SDR9": {"MinWall": 5.6, "MeanID": 38},
        "SDR7.4": {"MinWall": 6.9, "MeanID": 35},
    },    
 # Define wall thicknesses and internal diameters for the different SDRs at DN63
         63: {
        "SDR41": {"MinWall": 1.6, "MeanID": 60},
        "SDR33": {"MinWall": 2.0, "MeanID": 59},
        "SDR26": {"MinWall": 2.4, "MeanID": 58},
        "SDR21": {"MinWall": 3.0, "MeanID": 57},
        "SDR17": {"MinWall": 3.8, "MeanID": 55},
        "SDR13.6": {"MinWall": 4.7, "MeanID": 53},
        "SDR11": {"MinWall": 5.8, "MeanID": 51},
        "SDR9": {"MinWall": 7.1, "MeanID": 48},
        "SDR7.4": {"MinWall": 8.6, "MeanID": 45},
    },    
 # Define wall thicknesses and internal diameters for the different SDRs at DN75
         75: {
        "SDR41": {"MinWall": 1.6, "MeanID": 71},
        "SDR33": {"MinWall": 2.0, "MeanID": 70},
        "SDR26": {"MinWall": 2.4, "MeanID": 69},
        "SDR21": {"MinWall": 3.0, "MeanID": 67},
        "SDR17": {"MinWall": 3.8, "MeanID": 66},
        "SDR13.6": {"MinWall": 4.7, "MeanID": 63},
        "SDR11": {"MinWall": 5.8, "MeanID": 61},
        "SDR9": {"MinWall": 7.1, "MeanID": 58},
        "SDR7.4": {"MinWall": 8.6, "MeanID": 53},
    },        
  # Define wall thicknesses and internal diameters for the different SDRs at DN90
         90: {
        "SDR41": {"MinWall": 1.6, "MeanID": 71},
        "SDR33": {"MinWall": 2.0, "MeanID": 70},
        "SDR26": {"MinWall": 2.4, "MeanID": 69},
        "SDR21": {"MinWall": 3.0, "MeanID": 67},
        "SDR17": {"MinWall": 3.8, "MeanID": 66},
        "SDR13.6": {"MinWall": 4.7, "MeanID": 63},
        "SDR11": {"MinWall": 5.8, "MeanID": 61},
        "SDR9": {"MinWall": 7.1, "MeanID": 58},
        "SDR7.4": {"MinWall": 8.6, "MeanID": 53},
    },
          110: {
        "SDR41": {"MinWall": 2.7, "MeanID": 105},
        "SDR33": {"MinWall": 3.4, "MeanID": 103},
        "SDR26": {"MinWall": 4.3, "MeanID": 101},
        "SDR21": {"MinWall": 5.3, "MeanID": 99},
        "SDR17": {"MinWall": 6.6, "MeanID": 96},
        "SDR13.6": {"MinWall": 8.1, "MeanID": 93},
        "SDR11": {"MinWall": 10, "MeanID": 89},
        "SDR9": {"MinWall": 12.3, "MeanID": 84},
        "SDR7.4": {"MinWall": 15.1, "MeanID": 78},
    },

          125: {
        "SDR41": {"MinWall": 3.1, "MeanID": 119},
        "SDR33": {"MinWall": 3.9, "MeanID": 117},
        "SDR26": {"MinWall": 4.8, "MeanID": 115},
        "SDR21": {"MinWall": 6.0, "MeanID": 113},
        "SDR17": {"MinWall": 7.4, "MeanID": 110},
        "SDR13.6": {"MinWall": 9.2, "MeanID": 106},
        "SDR11": {"MinWall":11.4, "MeanID": 101},
        "SDR9": {"MinWall": 14, "MeanID": 96},
        "SDR7.4": {"MinWall": 17.1, "MeanID": 89},
    },
          140: {
        "SDR41": {"MinWall": 3.5, "MeanID": 133},
        "SDR33": {"MinWall": 4.3, "MeanID": 131},
        "SDR26": {"MinWall": 5.4, "MeanID": 129},
        "SDR21": {"MinWall": 6.7, "MeanID": 126},
        "SDR17": {"MinWall": 8.3, "MeanID": 123},
        "SDR13.6": {"MinWall": 10.3, "MeanID": 118},
        "SDR11": {"MinWall": 12.7, "MeanID": 114},
        "SDR9": {"MinWall": 15.7, "MeanID": 108},
        "SDR7.4": {"MinWall": 19.2, "MeanID": 99},
    },
          160: {
        "SDR41": {"MinWall": 4.0, "MeanID": 152},
        "SDR33": {"MinWall": 4.9, "MeanID": 150},
        "SDR26": {"MinWall": 6.2, "MeanID": 148},
        "SDR21": {"MinWall": 7.7, "MeanID": 144},
        "SDR17": {"MinWall": 9.5, "MeanID": 140},
        "SDR13.6": {"MinWall": 11.8, "MeanID": 136},
        "SDR11": {"MinWall": 14.6, "MeanID": 130},
        "SDR9": {"MinWall": 17.9, "MeanID": 123},
        "SDR7.4": {"MinWall": 21.9, "MeanID": 114},
    },
        180: {
    "SDR41": {"MinWall": 4.4, "MeanID": 171},
    "SDR33": {"MinWall": 5.5, "MeanID": 169},
    "SDR26": {"MinWall": 6.9, "MeanID": 166},
    "SDR21": {"MinWall": 8.6, "MeanID": 163},
    "SDR17": {"MinWall": 10.7, "MeanID": 158},
    "SDR13.6": {"MinWall": 13.3, "MeanID": 153},
    "SDR11": {"MinWall": 16.4, "MeanID": 145},
    "SDR9": {"MinWall": 20.1, "MeanID": 138},
    "SDR7.4": {"MinWall": 24.6, "MeanID": 128},
    },
        200: {
    "SDR41": {"MinWall": 4.9, "MeanID": 190},
    "SDR33": {"MinWall": 6.2, "MeanID": 188},
    "SDR26": {"MinWall": 7.7, "MeanID": 184},
    "SDR21": {"MinWall": 9.6, "MeanID": 180},
    "SDR17": {"MinWall": 11.9, "MeanID": 175},
    "SDR13.6": {"MinWall": 14.7, "MeanID": 170},
    "SDR11": {"MinWall": 18.2, "MeanID": 162},
    "SDR9": {"MinWall": 22.4, "MeanID": 154},
    "SDR7.4": {"MinWall": 27.3, "MeanID": 143},
    },

        225: {
    "SDR41": {"MinWall": 5.5, "MeanID": 215},
    "SDR33": {"MinWall": 6.9, "MeanID": 211},
    "SDR26": {"MinWall": 8.6, "MeanID": 207},
    "SDR21": {"MinWall": 10.8, "MeanID": 203},
    "SDR17": {"MinWall": 13.4, "MeanID": 198},
    "SDR13.6": {"MinWall": 16.6, "MeanID": 191},
    "SDR11": {"MinWall": 20.5, "MeanID": 183},
    "SDR9": {"MinWall": 25.1, "MeanID": 173},
    "SDR7.4": {"MinWall": 30.8, "MeanID": 161},
    },

        250: {
    "SDR41": {"MinWall": 6.2, "MeanID": 238},
    "SDR33": {"MinWall": 7.7, "MeanID": 235},
    "SDR26": {"MinWall": 9.6, "MeanID": 230},
    "SDR21": {"MinWall": 11.9, "MeanID": 225},
    "SDR17": {"MinWall": 14.8, "MeanID": 219},
    "SDR13.6": {"MinWall": 18.4, "MeanID": 212},
    "SDR11": {"MinWall": 22.7, "MeanID": 203},
    "SDR9": {"MinWall": 27.9, "MeanID": 192},
    "SDR7.4": {"MinWall": 34.2, "MeanID": 179},
    },

        280: {
    "SDR41": {"MinWall": 6.9, "MeanID": 267},
    "SDR33": {"MinWall": 8.6, "MeanID": 263},
    "SDR26": {"MinWall": 10.7, "MeanID": 258},
    "SDR21": {"MinWall": 13.4, "MeanID": 253},
    "SDR17": {"MinWall": 16.4, "MeanID": 246},
    "SDR13.6": {"MinWall": 20.6, "MeanID": 238},
    "SDR11": {"MinWall": 25.4, "MeanID": 228},
    "SDR9": {"MinWall": 31.3, "MeanID": 215},
    "SDR7.4": {"MinWall": 38.3, "MeanID": 200},
    },

        315: {
    "SDR41": {"MinWall": 7.7, "MeanID": 300},
    "SDR33": {"MinWall": 9.7, "MeanID": 296},
    "SDR26": {"MinWall": 12.1, "MeanID": 290},
    "SDR21": {"MinWall": 15.0, "MeanID": 285},
    "SDR17": {"MinWall": 18.7, "MeanID": 278},
    "SDR13.6": {"MinWall": 23.2, "MeanID": 268},
    "SDR11": {"MinWall": 28.6, "MeanID": 256},
    "SDR9": {"MinWall": 35.2, "MeanID": 242},
    "SDR7.4": {"MinWall": 43.0, "MeanID": 226},
    },

        355: {
    "SDR41": {"MinWall": 8.7, "MeanID": 338},
    "SDR33": {"MinWall": 10.9, "MeanID": 333},
    "SDR26": {"MinWall": 13.6, "MeanID": 328},
    "SDR21": {"MinWall": 16.9, "MeanID": 320},
    "SDR17": {"MinWall": 21.1, "MeanID": 311},
    "SDR13.6": {"MinWall": 26.1, "MeanID": 301},
    "SDR11": {"MinWall": 32.2, "MeanID": 289},
    "SDR9": {"MinWall": 39.6, "MeanID": 273},
    "SDR7.4": {"MinWall": 48.5, "MeanID": 255},
    },

        400: {
    "SDR41": {"MinWall": 9.8, "MeanID": 380},
    "SDR33": {"MinWall": 12.3, "MeanID": 376},
    "SDR26": {"MinWall": 15.3, "MeanID": 370},
    "SDR21": {"MinWall": 19.1, "MeanID": 362},
    "SDR17": {"MinWall": 23.7, "MeanID": 351},
    "SDR13.6": {"MinWall": 29.4, "MeanID": 340},
    "SDR11": {"MinWall": 36.3, "MeanID": 326},
    "SDR9": {"MinWall": 44.7, "MeanID": 307},
    "SDR7.4": {"MinWall": 54.6, "MeanID": 287},
    },

        450: {
    "SDR41": {"MinWall": 11, "MeanID": 429},
    "SDR33": {"MinWall": 13.8, "MeanID": 422},
    "SDR26": {"MinWall": 17.2, "MeanID": 415},
    "SDR21": {"MinWall": 21.5, "MeanID": 406},
    "SDR17": {"MinWall": 26.7, "MeanID": 395},
    "SDR13.6": {"MinWall": 33.1, "MeanID": 382},
    "SDR11": {"MinWall": 40.9, "MeanID": 366},
    "SDR9": {"MinWall": 50.2, "MeanID": 347},
    "SDR7.4": {"MinWall": 61.5, "MeanID": 322},
    },

        500: {
    "SDR41": {"MinWall": 12.3, "MeanID": 476},
    "SDR33": {"MinWall": 15.3, "MeanID": 470},
    "SDR26": {"MinWall": 19.1, "MeanID": 462},
    "SDR21": {"MinWall": 23.9, "MeanID": 452},
    "SDR17": {"MinWall": 29.6, "MeanID": 440},
    "SDR13.6": {"MinWall": 36.8, "MeanID": 424},
    "SDR11": {"MinWall": 45.4, "MeanID": 407},
    "SDR9": {"MinWall": 55.8, "MeanID": 385},
    "SDR7.4": {"MinWall": 67.6, "MeanID": 360},
    },

        560: {
    "SDR41": {"MinWall": 13.7, "MeanID": 534},
    "SDR33": {"MinWall": 17.2, "MeanID": 526},
    "SDR26": {"MinWall": 21.4, "MeanID": 518},
    "SDR21": {"MinWall": 26.7, "MeanID": 506},
    "SDR17": {"MinWall": 33.2, "MeanID": 494},
    "SDR13.6": {"MinWall": 41.2, "MeanID": 475},
    "SDR11": {"MinWall": 50.8, "MeanID": 455},
    "SDR9": {"MinWall": 62.5, "MeanID": 431},
    "SDR7.4": {"MinWall": 75.7, "MeanID": 403},
    },

        630: {
    "SDR41": {"MinWall": 15.4, "MeanID": 600},
    "SDR33": {"MinWall": 19.3, "MeanID": 592},
    "SDR26": {"MinWall": 24.1, "MeanID": 582},
    "SDR21": {"MinWall": 30, "MeanID": 570},
    "SDR17": {"MinWall": 37.3, "MeanID": 554},
    "SDR13.6": {"MinWall": 46.3, "MeanID": 535},
    "SDR11": {"MinWall": 57.2, "MeanID": 512},
    "SDR9": {"MinWall": 70.3, "MeanID": 485},
    "SDR7.4": {"MinWall": 85.1, "MeanID": 454},
    },

        710: {
    "SDR41": {"MinWall": 17.4, "MeanID": 676},
    "SDR33": {"MinWall": 21.8, "MeanID": 667},
    "SDR26": {"MinWall": 27.2, "MeanID": 656},
    "SDR21": {"MinWall": 33.9, "MeanID": 641},
    "SDR17": {"MinWall": 42.1, "MeanID": 624},
    "SDR13.6": {"MinWall": 52.2, "MeanID": 603},
    "SDR11": {"MinWall": 64.5, "MeanID": 578},
    "SDR9": {"MinWall": 79.3, "MeanID": 546},
    "SDR7.4": {"MinWall": 96, "MeanID": 512},
    },
        800: {
    "SDR41": {"MinWall": 19.6, "MeanID": 762},
    "SDR33": {"MinWall": 24.5, "MeanID": 752},
    "SDR26": {"MinWall": 30.6, "MeanID": 739},
    "SDR21": {"MinWall": 38.1, "MeanID": 723},
    "SDR17": {"MinWall": 47.4, "MeanID": 704},
    "SDR13.6": {"MinWall": 58.8, "MeanID": 679},
    "SDR11": {"MinWall": 72.5, "MeanID": 651},
    "SDR9": {"MinWall": 89.3, "MeanID": 616},
    "SDR7.4": {"MinWall": None, "MeanID": None},
    },

        900: {
    "SDR41": {"MinWall": 22.0, "MeanID": 858},
    "SDR33": {"MinWall": 27.6, "MeanID": 846},
    "SDR26": {"MinWall": 34.4, "MeanID": 831},
    "SDR21": {"MinWall": 42.9, "MeanID": 814},
    "SDR17": {"MinWall": 53.5, "MeanID": 791},
    "SDR13.6": {"MinWall": 66.2, "MeanID": 765},
    "SDR11": {"MinWall": 81.7, "MeanID": 732},
    "SDR9": {"MinWall": 100.0, "MeanID": 694},
    "SDR7.4": {"MinWall": None, "MeanID": None},
    },

        1000: {
    "SDR41": {"MinWall": 24.5, "MeanID": 953},
    "SDR33": {"MinWall": 30.6, "MeanID": 940},
    "SDR26": {"MinWall": 38.2, "MeanID": 924},
    "SDR21": {"MinWall": 47.7, "MeanID": 904},
    "SDR17": {"MinWall": 59.3, "MeanID": 880},
    "SDR13.6": {"MinWall": 72.5, "MeanID": 852},
    "SDR11": {"MinWall": 90.2, "MeanID": 815},
    "SDR9": {"MinWall": 111.2, "MeanID": 771},
    "SDR7.4": {"MinWall": None, "MeanID": None},
    },

        1200: {
    "SDR41": {"MinWall": 29.4, "MeanID": 1143},
    "SDR33": {"MinWall": 36.7, "MeanID": 1128},
    "SDR26": {"MinWall": 45.9, "MeanID": 1109},
    "SDR21": {"MinWall": 57.2, "MeanID": 1085},
    "SDR17": {"MinWall": 67.9, "MeanID": 1063},
    "SDR13.6": {"MinWall": 88.2, "MeanID": 1020},
    "SDR11": {"MinWall": 109.1, "MeanID": 976},
    "SDR9": {"MinWall": 133.4, "MeanID": 925},
    "SDR7.4": {"MinWall": None, "MeanID": None},
    },

}

def lookup_hdpe_pipe(DN, SDR):
    """
    Lookup the HDPE pipe parameters for given DN and SDR.
    
    Args:
        DN (int): Diameter Nominal, e.g. 1000, 1200
        SDR (str): SDR string, e.g. "SDR17"
        
    Returns:
        dict: Dictionary with keys "MinWall" and "MeanID"
        
    Raises:
        KeyError: if DN or SDR are not found in the data.
    """
    try:
        pipe_data = AS4130_HDPE[DN]
    except KeyError:
        raise KeyError(f"No HDPE pipe data for DN {DN}")
    
    try:
        return pipe_data[SDR]
    except KeyError:
        raise KeyError(f"No HDPE pipe data for DN {DN} with SDR {SDR}")